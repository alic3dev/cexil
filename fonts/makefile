PROJECT_NAME=cexil_fonts_compilation

CEXIL_FONT_EXTENSION=cexil_font

OUT_DIRECTORY=transpiled_fonts

CEXIL_FONT_FILES=$(wildcard *.$(CEXIL_FONT_EXTENSION))
CEXIL_FONT_OUT_DIRECTORIES=$(patsubst %.$(CEXIL_FONT_EXTENSION), $(OUT_DIRECTORY)/%, $(CEXIL_FONT_FILES))

CEXIL_FONT_TRANSPILER_DIRECTORY=cexil_font_transpiler
CEXIL_FONT_TRANSPILER_BINARY_DIRECTORY=bin
CEXIL_FONT_TRANSPILER_BINARY_NAME=cexil_font_transpiler
CEXIL_FONT_TRANSPILER_BINARY_PATH=$(CEXIL_FONT_TRANSPILER_DIRECTORY)/$(CEXIL_FONT_TRANSPILER_BINARY_DIRECTORY)/$(CEXIL_FONT_TRANSPILER_BINARY_NAME)

all: $(CEXIL_FONT_OUT_DIRECTORIES)

$(OUT_DIRECTORY)/%: %.$(CEXIL_FONT_EXTENSION) $(CEXIL_FONT_TRANSPILER_BINARY_NAME)
	$(CEXIL_FONT_TRANSPILER_BINARY_PATH) $< $(OUT_DIRECTORY)

$(CEXIL_FONT_TRANSPILER_BINARY_NAME): .FORCE
	cd $(CEXIL_FONT_TRANSPILER_DIRECTORY) && make

clean:
	-rm -r $(OUT_DIRECTORY) 2> /dev/null

clean_$(CEXIL_FONT_TRANSPILER_BINARY_NAME):
	cd $(CEXIL_FONT_TRANSPILER_DIRECTORY) && make clean

clean_all: clean clean_$(CEXIL_FONT_TRANSPILER_BINARY_NAME)

.FORCE:

